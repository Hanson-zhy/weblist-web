<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FileZen - 智能文件管理系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/components/header.css">
    <link rel="stylesheet" href="css/components/file-list.css">
    <link rel="stylesheet" href="css/components/modal.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <!-- 模式切换指示器 -->
    <div class="mode-indicator" id="modeIndicator">
        已切换到 <span id="modeText">日间</span> 模式
    </div>
    
    <!-- 顶部导航栏 -->
    <header class="header flex items-center justify-between px-6">
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-cloud"></i>
            </div>
            <h1>FileZen</h1>
        </div>
        
        <div class="search-bar">
            <input type="text" placeholder="搜索文件..." id="searchInput">
        </div>
        
        <div class="flex items-center gap-4">
            <!-- 昼夜切换按钮 -->
            <button class="action-btn" id="themeToggle">
                <i class="fas fa-moon" id="themeIcon"></i>
            </button>
            
            <!-- 设置按钮 -->
            <a href="settings.html" class="action-btn">
                <i class="fas fa-cog"></i>
            </a>
            
            <div class="w-8 h-8 rounded-full bg-white flex items-center justify-center text-blue-500">
                <i class="fas fa-user text-sm"></i>
            </div>
        </div>
    </header>

    <!-- 操作工具栏 -->
    <div class="toolbar">
        <button class="toolbar-btn" id="uploadBtn">
            <i class="fas fa-upload"></i>
            <span>上传</span>
        </button>
        <button class="toolbar-btn" id="newFolderBtn">
            <i class="fas fa-folder-plus"></i>
            <span>新建文件夹</span>
        </button>
        <button class="toolbar-btn" id="deleteBtn">
            <i class="fas fa-trash-alt"></i>
            <span>删除</span>
        </button>
        <button class="toolbar-btn" id="shareBtn">
            <i class="fas fa-share-alt"></i>
            <span>分享</span>
        </button>
        
        <div class="view-toggle">
            <button class="view-btn active" data-layout="list" id="listViewBtn">
                <i class="fas fa-list"></i>
            </button>
            <button class="view-btn" data-layout="grid" id="gridViewBtn">
                <i class="fas fa-th-large"></i>
            </button>
        </div>
    </div>

    <!-- 文件区域 - 列表布局 -->
    <div class="file-container list-layout active" id="listContainer">
        <div class="file-list" id="fileList">
            <!-- 文件夹项 -->
            <div class="file-item">
                <div class="file-icon">
                    <i class="fas fa-folder"></i>
                </div>
                <div class="file-name">项目文档</div>
                <div class="file-meta">32 项 · 2023-07-25</div>
                <div class="file-actions">
                    <button class="action-btn">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="action-btn">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
            </div>
            
            <!-- 文件项 -->
            <div class="file-item">
                <div class="file-icon">
                    <i class="fas fa-file-pdf"></i>
                </div>
                <div class="file-name">项目需求文档.pdf</div>
                <div class="file-meta">2.4 MB · 2023-07-25</div>
                <div class="file-actions">
                    <button class="action-btn">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="action-btn">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
            </div>
            
            <div class="file-item">
                <div class="file-icon">
                    <i class="fas fa-file-word"></i>
                </div>
                <div class="file-name">设计说明书.docx</div>
                <div class="file-meta">1.1 MB · 2023-07-24</div>
                <div class="file-actions">
                    <button class="action-btn">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="action-btn">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
            </div>
            
            <div class="file-item">
                <div class="file-icon">
                    <i class="fas fa-file-excel"></i>
                </div>
                <div class="file-name">项目预算表.xlsx</div>
                <div class="file-meta">856 KB · 2023-07-23</div>
                <div class="file-actions">
                    <button class="action-btn">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="action-btn">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
            </div>
            
            <div class="file-item">
                <div class="file-icon">
                    <i class="fas fa-file-image"></i>
                </div>
                <div class="file-name">界面设计稿.png</div>
                <div class="file-meta">3.2 MB · 2023-07-22</div>
                <div class="file-actions">
                    <button class="action-btn">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="action-btn">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
            </div>
            
            <div class="file-item">
                <div class="file-icon">
                    <i class="fas fa-file-code"></i>
                </div>
                <div class="file-name">前端代码.zip</div>
                <div class="file-meta">8.7 MB · 2023-07-21</div>
                <div class="file-actions">
                    <button class="action-btn">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="action-btn">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 文件区域 - 网格布局 -->
    <div class="file-container grid-layout" id="gridContainer">
        <!-- 文件夹卡片 -->
        <div class="file-card">
            <div class="card-icon">
                <i class="fas fa-folder"></i>
            </div>
            <div class="card-info">
                <div class="card-name">项目文档</div>
                <div class="card-meta">
                    <span>32 项</span>
                    <span>2023-07-25</span>
                </div>
                <div class="card-actions">
                    <button class="card-btn">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="card-btn">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 文件卡片 -->
        <div class="file-card">
            <div class="card-icon">
                <i class="fas fa-file-pdf"></i>
            </div>
            <div class="card-info">
                <div class="card-name">项目需求文档.pdf</div>
                <div class="card-meta">
                    <span>2.4 MB</span>
                    <span>2023-07-25</span>
                </div>
                <div class="card-actions">
                    <button class="card-btn">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="card-btn">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="file-card">
            <div class="card-icon">
                <i class="fas fa-file-word"></i>
            </div>
            <div class="card-info">
                <div class="card-name">设计说明书.docx</div>
                <div class="card-meta">
                    <span>1.1 MB</span>
                    <span>2023-07-24</span>
                </div>
                <div class="card-actions">
                    <button class="card-btn">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="card-btn">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="file-card">
            <div class="card-icon">
                <i class="fas fa-file-excel"></i>
            </div>
            <div class="card-info">
                <div class="card-name">项目预算表.xlsx</div>
                <div class="card-meta">
                    <span>856 KB</span>
                    <span>2023-07-23</span>
                </div>
                <div class="card-actions">
                    <button class="card-btn">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="card-btn">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="file-card">
            <div class="card-icon">
                <i class="fas fa-file-image"></i>
            </div>
            <div class="card-info">
                <div class="card-name">界面设计稿.png</div>
                <div class="card-meta">
                    <span>3.2 MB</span>
                    <span>2023-07-22</span>
                </div>
                <div class="card-actions">
                    <button class="card-btn">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="card-btn">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="file-card">
            <div class="card-icon">
                <i class="fas fa-file-code"></i>
            </div>
            <div class="card-info">
                <div class="card-name">前端代码.zip</div>
                <div class="card-meta">
                    <span>8.7 MB</span>
                    <span>2023-07-21</span>
                </div>
                <div class="card-actions">
                    <button class="card-btn">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="card-btn">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 右下角浮动菜单 -->
    <div class="floating-menu">
        <button class="menu-button" id="floatingMenuBtn">
            <i class="fas fa-plus"></i>
        </button>
        <div class="menu-items">
            <a href="#" class="menu-item">
                <i class="fas fa-cloud-upload-alt"></i>
                <span>上传文件</span>
            </a>
            <a href="#" class="menu-item">
                <i class="fas fa-sync-alt"></i>
                <span>刷新列表</span>
            </a>
            <a href="#" class="menu-item">
                <i class="fas fa-sort-amount-down"></i>
                <span>排序方式</span>
            </a>
            <a href="#" class="menu-item">
                <i class="fas fa-filter"></i>
                <span>文件过滤</span>
            </a>
            <a href="#" class="menu-item">
                <i class="fas fa-info-circle"></i>
                <span>系统信息</span>
            </a>
        </div>
    </div>
    
    <!-- 右键上下文菜单 -->
    <div class="context-menu" id="contextMenu">
        <div class="context-menu-item" data-action="open">
            <i class="fas fa-folder-open"></i>
            <span>打开</span>
        </div>
        <div class="context-menu-item" data-action="download">
            <i class="fas fa-download"></i>
            <span>下载</span>
        </div>
        <div class="context-menu-item" data-action="rename">
            <i class="fas fa-edit"></i>
            <span>重命名</span>
        </div>
        <div class="context-menu-item" data-action="move">
            <i class="fas fa-folder"></i>
            <span>移动到...</span>
        </div>
        <div class="context-menu-item" data-action="copy">
            <i class="fas fa-copy"></i>
            <span>复制</span>
        </div>
        <div class="context-menu-item delete" data-action="delete">
            <i class="fas fa-trash-alt"></i>
            <span>删除</span>
        </div>
        <div class="context-menu-item" data-action="share">
            <i class="fas fa-share-alt"></i>
            <span>分享</span>
        </div>
        <div class="context-menu-item" data-action="properties">
            <i class="fas fa-info-circle"></i>
            <span>属性</span>
        </div>
    </div>
    
    <!-- 状态信息栏 -->
    <div class="status-bar">
        <span>文件总数: <span id="fileCount">6</span> | 已选: <span id="selectedCount">0</span></span>
        <span class="status-selection">按 Ctrl 键可多选 | Delete 删除 | Ctrl+A 全选</span>
    </div>

    <script>
        // DOM 元素
        const listViewBtn = document.getElementById('listViewBtn');
        const gridViewBtn = document.getElementById('gridViewBtn');
        const listContainer = document.getElementById('listContainer');
        const gridContainer = document.getElementById('gridContainer');
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const contextMenu = document.getElementById('contextMenu');
        const fileList = document.getElementById('fileList');
        const deleteBtn = document.getElementById('deleteBtn');
        const uploadBtn = document.getElementById('uploadBtn');
        const newFolderBtn = document.getElementById('newFolderBtn');
        const shareBtn = document.getElementById('shareBtn');
        const searchInput = document.getElementById('searchInput');
        const fileCount = document.getElementById('fileCount');
        const selectedCount = document.getElementById('selectedCount');
        const modeIndicator = document.getElementById('modeIndicator');
        const modeText = document.getElementById('modeText');
        
        // 当前选中的文件项
        let selectedFileItem = null;
        let currentLayout = 'list';
        let isCtrlPressed = false;
        let selectedFiles = new Set();
        
        // 初始化主题
        function initTheme() {
            const isNightMode = localStorage.getItem('nightMode') === 'true';
            document.body.classList.toggle('night-mode', isNightMode);
            themeIcon.classList.toggle('fa-moon', !isNightMode);
            themeIcon.classList.toggle('fa-sun', isNightMode);
        }
        
        // 切换主题
        function toggleTheme() {
            const isNightMode = document.body.classList.toggle('night-mode');
            localStorage.setItem('nightMode', isNightMode);
            
            // 更新图标
            themeIcon.classList.toggle('fa-moon', !isNightMode);
            themeIcon.classList.toggle('fa-sun', isNightMode);
            
            // 显示模式切换提示
            modeText.textContent = isNightMode ? '夜间' : '日间';
            modeIndicator.style.display = 'block';
            setTimeout(() => {
                modeIndicator.style.display = 'none';
            }, 2000);
        }
        
        // 布局切换
        function switchLayout(layout) {
            currentLayout = layout;
            // 更新按钮状态
            listViewBtn.classList.remove('active');
            gridViewBtn.classList.remove('active');
            
            // 隐藏所有布局
            listContainer.classList.remove('active');
            gridContainer.classList.remove('active');
            
            if (layout === 'list') {
                listViewBtn.classList.add('active');
                listContainer.classList.add('active');
            } else {
                gridViewBtn.classList.add('active');
                gridContainer.classList.add('active');
            }
        }
        
        listViewBtn.addEventListener('click', () => {
            switchLayout('list');
        });
        
        gridViewBtn.addEventListener('click', () => {
            switchLayout('grid');
        });
        
        // 文件项点击效果
        function toggleFileSelection(fileItem, isCtrlKey) {
            if (!isCtrlKey) {
                // 清除所有选中
                document.querySelectorAll('.file-item.selected, .file-card.selected').forEach(item => {
                    item.classList.remove('selected');
                    selectedFiles.delete(item);
                });
            }
            
            // 切换当前项选中状态
            fileItem.classList.toggle('selected');
            
            if (fileItem.classList.contains('selected')) {
                selectedFiles.add(fileItem);
            } else {
                selectedFiles.delete(fileItem);
            }
            
            // 更新选中计数
            updateSelectionCount();
        }
        
        function updateSelectionCount() {
            selectedCount.textContent = selectedFiles.size;
            
            // 更新工具栏按钮状态
            const hasSelection = selectedFiles.size > 0;
            deleteBtn.disabled = !hasSelection;
            shareBtn.disabled = !hasSelection;
        }
        
        // 为文件容器添加事件监听
        listContainer.addEventListener('click', function(e) {
            const fileItem = e.target.closest('.file-item');
            if (fileItem) {
                toggleFileSelection(fileItem, e.ctrlKey || e.metaKey);
            }
        });
        
        gridContainer.addEventListener('click', function(e) {
            const fileCard = e.target.closest('.file-card');
            if (fileCard) {
                toggleFileSelection(fileCard, e.ctrlKey || e.metaKey);
            }
        });
        
        // 点击空白区域取消所有选择
        document.addEventListener('click', function(e) {
            const isFileItem = e.target.closest('.file-item, .file-card');
            const isToolbarBtn = e.target.closest('.toolbar-btn, .action-btn');
            const isContextMenu = e.target.closest('.context-menu');
            
            if (!isFileItem && !isToolbarBtn && !isContextMenu) {
                // 清除所有选中
                document.querySelectorAll('.file-item.selected, .file-card.selected').forEach(item => {
                    item.classList.remove('selected');
                });
                selectedFiles.clear();
                updateSelectionCount();
            }
        });
        
        // 键盘事件
        document.addEventListener('keydown', function(e) {
            // 记录Ctrl键状态
            if (e.key === 'Control' || e.key === 'Meta') {
                isCtrlPressed = true;
            }
            
            // Delete键删除选中项
            if (e.key === 'Delete' && selectedFiles.size > 0) {
                const confirmed = confirm(`确定要删除 ${selectedFiles.size} 个文件吗？`);
                if (confirmed) {
                    selectedFiles.forEach(item => {
                        item.remove();
                    });
                    selectedFiles.clear();
                    updateSelectionCount();
                    showNotification(`${selectedFiles.size}个文件已删除`);
                }
            }
            
            // Ctrl+A全选
            if ((e.ctrlKey || e.metaKey) && e.key === 'a') {
                e.preventDefault();
                
                const items = currentLayout === 'list' 
                    ? document.querySelectorAll('.file-item') 
                    : document.querySelectorAll('.file-card');
                
                items.forEach(item => {
                    item.classList.add('selected');
                    selectedFiles.add(item);
                });
                
                updateSelectionCount();
            }
        });
        
        document.addEventListener('keyup', function(e) {
            if (e.key === 'Control' || e.key === 'Meta') {
                isCtrlPressed = false;
            }
        });
        
        // 删除按钮事件
        deleteBtn.addEventListener('click', function() {
            if (selectedFiles.size === 0) return;
            
            const confirmed = confirm(`确定要删除 ${selectedFiles.size} 个文件吗？`);
            if (confirmed) {
                selectedFiles.forEach(item => {
                    item.remove();
                });
                selectedFiles.clear();
                updateSelectionCount();
                showNotification(`${selectedFiles.size}个文件已删除`);
            }
        });
        
        // 上传按钮事件
        uploadBtn.addEventListener('click', function() {
            showNotification('上传功能已触发');
        });
        
        // 新建文件夹按钮事件
        newFolderBtn.addEventListener('click', function() {
            showNotification('新建文件夹功能已触发');
        });
        
        // 分享按钮事件
        shareBtn.addEventListener('click', function() {
            if (selectedFiles.size === 0) return;
            showNotification(`已分享 ${selectedFiles.size} 个文件`);
        });
        
        // 搜索功能
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            
            // 列表布局搜索
            const listItems = document.querySelectorAll('.file-item');
            listItems.forEach(item => {
                const fileName = item.querySelector('.file-name').textContent.toLowerCase();
                item.style.display = fileName.includes(searchTerm) ? 'grid' : 'none';
            });
            
            // 网格布局搜索
            const gridItems = document.querySelectorAll('.file-card');
            gridItems.forEach(item => {
                const fileName = item.querySelector('.card-name').textContent.toLowerCase();
                item.style.display = fileName.includes(searchTerm) ? 'block' : 'none';
            });
        });
        
        // 右键菜单功能实现
        document.addEventListener('contextmenu', function(e) {
            // 检查是否点击在文件项上
            const fileItem = e.target.closest('.file-item, .file-card');
            if (fileItem) {
                e.preventDefault();
                selectedFileItem = fileItem;
                
                // 显示菜单
                contextMenu.style.display = 'block';
                contextMenu.style.left = `${e.pageX}px`;
                contextMenu.style.top = `${e.pageY}px`;
            }
        });
        
        // 菜单项点击事件
        contextMenu.querySelectorAll('.context-menu-item').forEach(item => {
            item.addEventListener('click', function() {
                const action = this.getAttribute('data-action');
                let fileName = '';
                
                if (selectedFileItem) {
                    if (selectedFileItem.classList.contains('file-item')) {
                        fileName = selectedFileItem.querySelector('.file-name').textContent;
                    } else {
                        fileName = selectedFileItem.querySelector('.card-name').textContent;
                    }
                    
                    showNotification(`对文件 "${fileName}" 执行了操作: ${action}`);
                }
                
                // 隐藏菜单
                contextMenu.style.display = 'none';
            });
        });
        
        // 点击其他地方隐藏菜单
        document.addEventListener('click', function(e) {
            if (!contextMenu.contains(e.target)) {
                contextMenu.style.display = 'none';
            }
        });
        
        // 显示通知
        function showNotification(message) {
            const existing = document.querySelector('.notification');
            if (existing) existing.remove();
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.innerHTML = `<i class="fas fa-check-circle mr-2"></i> ${message}`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            // 确保初始只显示列表布局
            switchLayout('list');
            
            // 初始化主题
            initTheme();
        });
        
        // 添加主题切换事件
        themeToggle.addEventListener('click', toggleTheme);
    </script>
</body>
</html>